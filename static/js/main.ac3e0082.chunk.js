(this.webpackJsonpteacher=this.webpackJsonpteacher||[]).push([[0],{132:function(t,e,n){},140:function(t,e){},142:function(t,e){},153:function(t,e){},155:function(t,e){},182:function(t,e){},184:function(t,e){},185:function(t,e){},191:function(t,e){},193:function(t,e){},211:function(t,e){},213:function(t,e){},225:function(t,e){},228:function(t,e){},254:function(t,e,n){},255:function(t,e,n){},256:function(t,e,n){},257:function(t,e,n){},258:function(t,e,n){},259:function(t,e,n){},260:function(t,e,n){},261:function(t,e,n){"use strict";n.r(e);var s=n(0),c=n(5),a=n(125),i=n.n(a),r=(n(132),n(8)),u=n.n(r),h=n(17),d=n(9),o=n(10),l=n(12),j=n(11),f=n(69),b=n.n(f);n(134);b.a.initializeApp({apiKey:"AIzaSyDu7RYF7A3eaC2uedmAEUFyz1u14d1def4",authDomain:"class-104.firebaseapp.com",databaseURL:"https://class-104.firebaseio.com",projectId:"class-104",storageBucket:"class-104.appspot.com",messagingSenderId:"642296584585",appId:"1:642296584585:web:a63c7c9e96c03e203e6958"});var O=b.a.database();function p(){return new Promise((function(t,e){O.ref("class").on("value",(function(e){var n=[];e.forEach((function(t){n.push(t.val())})),t(n)}))}))}function x(){return new Promise((function(t,e){O.ref("teacher").on("value",(function(e){var n=[];e.forEach((function(t){n.push(t.val())})),t(n)}))}))}var v=n(126),m=n.n(v);function g(t,e){return m.a.HmacSHA256(t+e,"lhrYDV62").toString()}var S=n(21),C=(n(254),function(t){Object(l.a)(n,t);var e=Object(j.a)(n);function n(t){var s;return Object(d.a)(this,n),(s=e.call(this,t)).state={},s}return Object(o.a)(n,[{key:"handleChange",value:function(t){this.setState(Object(S.a)({},t.target.name,t.target.value))}},{key:"handleSubmit",value:function(t){t.preventDefault();var e={username:this.state.username.toLowerCase(),password:this.state.password};this.props.checkAccount(e)}},{key:"render",value:function(){var t=this;return Object(s.jsx)("div",{className:"login",children:Object(s.jsxs)("form",{onSubmit:function(e){return t.handleSubmit(e)},children:[Object(s.jsx)("h1",{children:"GI\xc1O VI\xcaN"}),Object(s.jsxs)("div",{children:[Object(s.jsx)("label",{htmlFor:"login_username",children:"T\xc0I KHO\u1ea2N"}),Object(s.jsx)("input",{name:"username",id:"login_username",onChange:function(e){return t.handleChange(e)},type:"text",autoComplete:"Off",required:!0})]}),Object(s.jsxs)("div",{children:[Object(s.jsx)("label",{htmlFor:"login_password",children:"M\u1eacT KH\u1ea8U"}),Object(s.jsx)("input",{name:"password",id:"login_password",onChange:function(e){return t.handleChange(e)},type:"password",autoComplete:"Off",required:!0})]}),Object(s.jsx)("p",{onClick:function(){return alert("Ch\u01b0a ph\xe1t tri\u1ec3n.")},children:"Qu\xean m\u1eadt kh\u1ea9u?"}),Object(s.jsx)("button",{type:"submit",children:"\u0110\u0102NG NH\u1eacP"})]})})}}]),n}(c.Component)),k=(n(255),function(t){Object(l.a)(n,t);var e=Object(j.a)(n);function n(t){var s;return Object(d.a)(this,n),(s=e.call(this,t)).state={},s}return Object(o.a)(n,[{key:"getData",value:function(){var t=Object(h.a)(u.a.mark((function t(){var e,n,s=this;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x();case 2:e=t.sent,n=e.filter((function(t){return t.teacherid===s.props.teacherid}))[0],this.setState({teacher:n});case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.getData()}},{key:"renderProfile",value:function(){var t=this;if(this.state.teacher)return Object(s.jsxs)("div",{className:"profile",children:[Object(s.jsx)("h1",{children:"Th\xf4ng tin c\xe1 nh\xe2n"}),Object(s.jsxs)("div",{className:"btn",children:[Object(s.jsx)("button",{onClick:function(){return t.props.changeStatus("EDIT_PROFILE")},children:"S\u1eeda th\xf4ng tin"}),Object(s.jsx)("button",{onClick:function(){return t.props.signOut()},children:"\u0110\u0103ng xu\u1ea5t"})]}),Object(s.jsxs)("ul",{children:[Object(s.jsxs)("li",{children:[Object(s.jsx)("h2",{children:"T\xe0i kho\u1ea3n"}),Object(s.jsx)("p",{children:this.state.teacher.username})]}),Object(s.jsxs)("li",{children:[Object(s.jsx)("h2",{children:"H\u1ecd v\xe0 t\xean"}),Object(s.jsx)("p",{children:this.state.teacher.name})]}),Object(s.jsxs)("li",{children:[Object(s.jsx)("h2",{children:"Gi\u1edbi t\xednh"}),Object(s.jsx)("p",{children:parseInt(this.state.teacher.gender)?"N\u1eef":"Nam"})]}),Object(s.jsxs)("li",{children:[Object(s.jsx)("h2",{children:"Ng\xe0y sinh"}),Object(s.jsx)("p",{children:this.state.teacher.dateofbirth})]}),Object(s.jsxs)("li",{children:[Object(s.jsx)("h2",{children:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i"}),Object(s.jsx)("p",{children:this.state.teacher.phone})]})]})]})}},{key:"render",value:function(){return Object(s.jsx)("div",{className:"container",children:this.renderProfile()})}}]),n}(c.Component)),y=n(22),I=(n(256),function(t){Object(l.a)(n,t);var e=Object(j.a)(n);function n(t){var s;return Object(d.a)(this,n),(s=e.call(this,t)).state={},s}return Object(o.a)(n,[{key:"getData",value:function(){var t=Object(h.a)(u.a.mark((function t(){var e,n,s=this;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x();case 2:e=t.sent,n=e.filter((function(t){return t.teacherid===s.props.teacherid}))[0],this.setState({teacher:n});case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.getData()}},{key:"handleChange",value:function(t){var e=t.target,n="checkbox"===e.type?e.checked:e.value,s=e.name,c=function(t){for(var e=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","0","1","2","3","4","5","6","7","8","9","+","/"],n="",s=0;s<t;s++)n+=e[Math.floor(Math.random()*e.length)];return n}(10);if("password"===s){var a=g(n,c);this.setState({teacher:Object(y.a)(Object(y.a)({},this.state.teacher),{},{salt:c,hash:a})})}else this.setState({teacher:Object(y.a)(Object(y.a)({},this.state.teacher),{},Object(S.a)({},s,n))})}},{key:"handleSubmit",value:function(t){var e,n=this;t.preventDefault(),O.ref("teacher").on("value",(function(t){t.forEach((function(t){t.val().teacherid===n.state.teacher.teacherid&&(e=t.key)}))})),O.ref("teacher").child(e).set(this.state.teacher),alert("L\u01b0u th\xf4ng tin th\xe0nh c\xf4ng."),this.props.changeStatus("PROFILE")}},{key:"renderEditProfile",value:function(){var t=this;if(this.state.teacher)return Object(s.jsxs)("div",{className:"edit_profile",children:[Object(s.jsx)("h1",{children:"S\u1eeda th\xf4ng tin c\xe1 nh\xe2n"}),Object(s.jsxs)("form",{onSubmit:function(e){return t.handleSubmit(e)},children:[Object(s.jsxs)("div",{children:[Object(s.jsx)("label",{children:"T\xe0i kho\u1ea3n"}),Object(s.jsx)("input",{type:"text",name:"username",defaultValue:this.state.teacher.username,disabled:!0})]}),Object(s.jsxs)("div",{children:[Object(s.jsx)("label",{children:"M\u1eadt kh\u1ea9u"}),Object(s.jsx)("input",{type:"password",name:"password",onChange:function(e){return t.handleChange(e)},autoComplete:"off",required:!0})]}),Object(s.jsxs)("div",{children:[Object(s.jsx)("label",{children:"H\u1ecd v\xe0 t\xean"}),Object(s.jsx)("input",{type:"text",name:"name",defaultValue:this.state.teacher.name,onChange:function(e){return t.handleChange(e)},autoComplete:"off",required:!0})]}),Object(s.jsxs)("div",{children:[Object(s.jsx)("label",{children:"Gi\u1edbi t\xednh"}),Object(s.jsxs)("select",{name:"gender",defaultValue:this.state.teacher.gender,onChange:function(e){return t.handleChange(e)},autoComplete:"off",required:!0,children:[Object(s.jsx)("option",{value:0,children:"Nam"}),Object(s.jsx)("option",{value:1,children:"N\u1eef"})]})]}),Object(s.jsxs)("div",{children:[Object(s.jsx)("label",{children:"Ng\xe0y sinh"}),Object(s.jsx)("input",{type:"date",name:"dateofbirth",defaultValue:this.state.teacher.dateofbirth,onChange:function(e){return t.handleChange(e)},autoComplete:"off",required:!0})]}),Object(s.jsxs)("div",{children:[Object(s.jsx)("label",{children:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i"}),Object(s.jsx)("input",{type:"number",name:"phone",defaultValue:this.state.teacher.phone,onChange:function(e){return t.handleChange(e)},autoComplete:"off",required:!0})]}),Object(s.jsx)("button",{type:"submit",children:"L\u01b0u"})]})]})}},{key:"render",value:function(){return Object(s.jsx)("div",{className:"container",children:this.renderEditProfile()})}}]),n}(c.Component)),N=(n(257),function(t){Object(l.a)(n,t);var e=Object(j.a)(n);function n(t){var s;return Object(d.a)(this,n),(s=e.call(this,t)).state={},s}return Object(o.a)(n,[{key:"getData",value:function(){var t=Object(h.a)(u.a.mark((function t(){var e,n,s=this;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p();case 2:e=t.sent,n=[],e.forEach((function(t){t.teacherid===s.props.teacherid&&n.push(t.classid)})),this.setState({classes:n});case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.getData()}},{key:"handleClick",value:function(t){this.props.getClassId(t),this.props.changeStatus("CLASS_INFO")}},{key:"mapClass",value:function(){var t=this;return this.state.classes.map((function(e,n){return Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{children:n+1}),Object(s.jsx)("td",{children:e}),Object(s.jsx)("td",{children:Object(s.jsx)("button",{onClick:function(){return t.handleClick(e)},children:"Xem"})})]},n)}))}},{key:"renderClassList",value:function(){if(this.state.classes)return Object(s.jsxs)("div",{className:"class_list",children:[Object(s.jsx)("h1",{children:"Danh s\xe1ch l\u1edbp"}),Object(s.jsx)("table",{children:Object(s.jsxs)("tbody",{children:[Object(s.jsxs)("tr",{children:[Object(s.jsx)("th",{children:"STT"}),Object(s.jsx)("th",{children:"M\xe3 l\u1edbp"}),Object(s.jsx)("th",{children:"Ch\u1ee9c n\u0103ng"})]}),this.mapClass()]})})]})}},{key:"render",value:function(){return Object(s.jsx)("div",{className:"container",children:this.renderClassList()})}}]),n}(c.Component)),w=(n(258),function(t){Object(l.a)(n,t);var e=Object(j.a)(n);function n(t){var s;return Object(d.a)(this,n),(s=e.call(this,t)).state={},s}return Object(o.a)(n,[{key:"getData",value:function(){var t=Object(h.a)(u.a.mark((function t(){var e,n,s,c,a,i,r,h=this;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=[],t.next=3,p();case 3:return n=t.sent,s=n.filter((function(t){return t.classid===h.props.classid}))[0],t.next=7,new Promise((function(t,e){O.ref("course").on("value",(function(e){var n=[];e.forEach((function(t){n.push(t.val())})),t(n)}))}));case 7:return c=t.sent,a=c.filter((function(t){return t.courseid===s.courseid}))[0],t.next=11,new Promise((function(t,e){O.ref("student").on("value",(function(e){var n=[];e.forEach((function(t){n.push(t.val())})),t(n)}))}));case 11:return i=t.sent,t.next=14,new Promise((function(t,e){O.ref("class_member").on("value",(function(e){var n=[];e.forEach((function(t){n.push(t.val())})),t(n)}))}));case 14:r=t.sent,r.filter((function(t){return t.classid===h.props.classid})).forEach((function(t){i.forEach((function(n){if(t.studentid===n.studentid){var s={studentId:n.studentid,studentName:n.name,studentGender:n.gender,studentDateOfBirth:n.dateofbirth,studentPhone:n.phone,studentCount:t.count,studentScore:t.score,studentCourseId:a.courseid,studentCourseName:a.name};e.push(s)}}))})),e=e.sort((function(t,e){return t.studentId>e.studentId?1:t.studentId<e.studentId?-1:0})),this.setState({classInfo:e});case 19:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.getData()}},{key:"mapClass",value:function(){var t=this;if(this.state.classInfo)return this.state.classInfo.map((function(e,n){return Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{children:n+1}),Object(s.jsx)("td",{children:e.studentId}),Object(s.jsx)("td",{children:e.studentName}),Object(s.jsx)("td",{children:parseInt(e.studentGender)?"N\u1eef":"Nam"}),Object(s.jsx)("td",{children:e.studentDateOfBirth}),Object(s.jsx)("td",{children:e.studentPhone}),Object(s.jsx)("td",{children:e.studentCount}),Object(s.jsx)("td",{children:e.studentScore}),Object(s.jsx)("td",{children:e.studentCourseId}),Object(s.jsx)("td",{children:e.studentCourseName}),Object(s.jsx)("td",{children:Object(s.jsx)("button",{onClick:function(){return t.getStudentEdit(e)},children:"S\u1eeda"})})]},n)}))}},{key:"renderClassInfo",value:function(){if(this.state.classInfo)return Object(s.jsxs)("div",{className:"class_info",children:[Object(s.jsxs)("h1",{children:["Danh s\xe1ch h\u1ecdc sinh l\u1edbp ",this.props.classid]}),Object(s.jsx)("table",{children:Object(s.jsxs)("tbody",{children:[Object(s.jsxs)("tr",{children:[Object(s.jsx)("th",{children:"STT"}),Object(s.jsx)("th",{children:"M\xe3 h\u1ecdc sinh"}),Object(s.jsx)("th",{children:"H\u1ecd v\xe0 t\xean"}),Object(s.jsx)("th",{children:"Gi\u1edbi t\xednh"}),Object(s.jsx)("th",{children:"Ng\xe0y sinh"}),Object(s.jsx)("th",{children:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i"}),Object(s.jsx)("th",{children:"S\u1ed1 bu\u1ed5i h\u1ecdc"}),Object(s.jsx)("th",{children:"\u0110i\u1ec3m"}),Object(s.jsx)("th",{children:"M\xe3 kh\xf3a h\u1ecdc"}),Object(s.jsx)("th",{children:"T\xean kh\xf3a h\u1ecdc"}),Object(s.jsx)("th",{children:"Ch\u1ee9c n\u0103ng"})]}),this.mapClass()]})}),this.renderEditForm()]})}},{key:"getStudentEdit",value:function(t){this.state.editStatus?alert("B\u1ea1n ph\u1ea3i l\u01b0u tr\u01b0\u1edbc khi s\u1eeda ti\u1ebfp."):this.setState({student:t,editStatus:!0})}},{key:"handleChange",value:function(t){var e=t.target,n=e.value,s=e.name,c=Object(y.a)(Object(y.a)({},this.state.student),{},Object(S.a)({},s,n));this.setState({student:c})}},{key:"handleSubmit",value:function(t){var e,n=this;t.preventDefault(),O.ref("class_member").on("value",(function(t){t.forEach((function(t){t.val().classid===n.props.classid&&t.val().studentid===n.state.student.studentId&&(e=t.key)}))}));var s={classid:this.props.classid,count:this.state.student.studentCount,score:this.state.student.studentScore,studentid:this.state.student.studentId};O.ref("class_member").child(e).set(s),this.setState({editStatus:!1}),this.getData()}},{key:"renderEditForm",value:function(){var t=this;if(this.state.student&&this.state.editStatus)return Object(s.jsxs)("form",{className:"edit_form",onSubmit:function(e){return t.handleSubmit(e)},children:[Object(s.jsx)("div",{children:Object(s.jsx)("input",{type:"text",defaultValue:this.state.student.studentId,disabled:!0})}),Object(s.jsx)("div",{children:Object(s.jsx)("input",{type:"text",defaultValue:this.state.student.studentName,disabled:!0})}),Object(s.jsx)("div",{children:Object(s.jsxs)("select",{defaultValue:this.state.student.studentGender,disabled:!0,children:[Object(s.jsx)("option",{value:0,children:"Nam"}),Object(s.jsx)("option",{value:1,children:"N\u1eef"})]})}),Object(s.jsx)("div",{children:Object(s.jsx)("input",{type:"date",defaultValue:this.state.student.studentDateOfBirth,disabled:!0})}),Object(s.jsx)("div",{children:Object(s.jsx)("input",{type:"text",defaultValue:this.state.student.studentPhone,disabled:!0})}),Object(s.jsx)("div",{children:Object(s.jsx)("input",{type:"number",name:"studentCount",onChange:function(e){return t.handleChange(e)},defaultValue:this.state.student.studentCount})}),Object(s.jsx)("div",{children:Object(s.jsx)("input",{type:"text",name:"studentScore",onChange:function(e){return t.handleChange(e)},defaultValue:this.state.student.studentScore})}),Object(s.jsx)("div",{children:Object(s.jsx)("input",{type:"text",defaultValue:this.state.student.studentCourseId,disabled:!0})}),Object(s.jsx)("div",{children:Object(s.jsx)("input",{type:"text",defaultValue:this.state.student.studentCourseName,disabled:!0})}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{type:"submit",children:"L\u01b0u"})})]})}},{key:"render",value:function(){return Object(s.jsx)("div",{className:"container",children:this.renderClassInfo()})}}]),n}(c.Component)),D=(n(259),function(t){Object(l.a)(n,t);var e=Object(j.a)(n);function n(t){var s;return Object(d.a)(this,n),(s=e.call(this,t)).state={status:"CLASS_LIST"},s}return Object(o.a)(n,[{key:"option",value:function(){var t=this;switch(this.state.status){case"PROFILE":return Object(s.jsx)(k,{teacherid:this.props.teacherid,signOut:function(){return t.props.signOut()},changeStatus:function(e){return t.changeStatus(e)}});case"EDIT_PROFILE":return Object(s.jsx)(I,{teacherid:this.props.teacherid,changeStatus:function(e){return t.changeStatus(e)}});case"CLASS_LIST":return Object(s.jsx)(N,{teacherid:this.props.teacherid,changeStatus:function(e){return t.changeStatus(e)},getClassId:function(e){return t.getClassId(e)}});case"CLASS_INFO":return Object(s.jsx)(w,{teacherid:this.props.teacherid,classid:this.state.classid})}}},{key:"changeStatus",value:function(t){this.setState({status:t})}},{key:"getClassId",value:function(t){this.setState({classid:t})}},{key:"render",value:function(){var t=this;return Object(s.jsxs)("div",{className:"teacher",children:[this.option(),Object(s.jsxs)("div",{className:"btn",children:[Object(s.jsx)("button",{onClick:function(){return t.changeStatus("CLASS_LIST")},children:"L\u1edbp h\u1ecdc"}),Object(s.jsx)("button",{onClick:function(){return t.changeStatus("PROFILE")},children:"C\xe1 nh\xe2n"})]})]})}}]),n}(c.Component)),E=(n(260),function(t){Object(l.a)(n,t);var e=Object(j.a)(n);function n(t){var s;return Object(d.a)(this,n),(s=e.call(this,t)).state={},s}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var t=JSON.parse(sessionStorage.getItem("teacherid"));t&&this.setState({teacherid:t})}},{key:"checkAccount",value:function(){var t=Object(h.a)(u.a.mark((function t(e){var n,s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x();case 2:n=t.sent,(s=n.filter((function(t){return e.username===t.username&&g(e.password,t.salt)===t.hash}))[0])?(alert("\u0110\u0103ng nh\u1eadp th\xe0nh c\xf4ng."),this.setState({teacherid:s.teacherid}),sessionStorage.setItem("teacherid",JSON.stringify(s.teacherid))):alert("Sai m\u1eadt kh\u1ea9u ho\u1eb7c t\xe0i kho\u1ea3n kh\xf4ng t\u1ed3n t\u1ea1i.");case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"checkLogin",value:function(){var t=this;return this.state.teacherid?Object(s.jsx)(D,{teacherid:this.state.teacherid,signOut:function(){return t.signOut()}}):Object(s.jsx)(C,{checkAccount:function(e){return t.checkAccount(e)}})}},{key:"signOut",value:function(){sessionStorage.clear(),this.setState({teacherid:null})}},{key:"render",value:function(){return Object(s.jsx)("div",{children:this.checkLogin()})}}]),n}(c.Component));i.a.render(Object(s.jsx)(E,{}),document.getElementById("root"))}},[[261,1,2]]]);
//# sourceMappingURL=main.ac3e0082.chunk.js.map